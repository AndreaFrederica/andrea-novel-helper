# WebDAV 同步功能使用说明

## 功能概述

WebDAV 同步功能允许您将本地文件与远程 WebDAV 服务器进行同步，支持双向同步、仅推送和仅拉取三种模式。所有同步操作都在后台 Worker 中异步执行，确保不会阻塞主界面。

## 使用方法

### 1. 账户管理

在 VS Code 中打开命令面板（`Ctrl+Shift+P` 或 `Cmd+Shift+P`），输入并选择：
```
andrea.webdav.manageAccounts
```

这将打开账户管理菜单，您可以选择：
- **➕ 新增账户**：添加新的 WebDAV 账户
- **✏️ 编辑账户**：修改现有账户信息
- **🗑️ 删除账户**：删除不需要的账户
- **📃 查看账户列表**：查看所有已配置的账户

#### 账户配置信息
添加账户时需要提供以下信息：
- **账户名称**：用于识别账户的友好名称
- **服务器地址**：WebDAV 服务器的 URL
- **用户名**：WebDAV 账户用户名
- **密码**：WebDAV 账户密码
- **根路径**：（可选）服务器上的根目录路径

### 2. 执行同步

配置好账户后，在命令面板中输入并选择：
```
andrea.webdav.syncNow
```

系统会提示您选择同步方向：
- **双向同步（较新者覆盖）**：比较本地和远程文件的修改时间，用较新的文件覆盖较旧的
- **仅推送（本地覆盖远端）**：将本地文件上传到服务器，覆盖远程文件
- **仅拉取（远端覆盖本地）**：从服务器下载文件，覆盖本地文件

## 技术特点

### 异步执行
- 所有文件 I/O 和网络操作都在独立的 Worker 线程中执行
- 主界面保持响应，不会因同步操作而卡顿
- 支持大文件和大量文件的同步操作

### 安全性
- 密码使用 VS Code 内置的安全存储机制加密保存
- 支持 HTTPS 连接确保传输安全
- 账户信息与工作区绑定，不会泄露到其他项目

### 可靠性
- 完善的错误处理机制
- 同步过程中的异常会有详细的错误提示
- 支持断点续传和重试机制

## 注意事项

1. **首次使用**：建议先在测试目录中尝试同步功能，确保配置正确
2. **备份重要文件**：在执行同步操作前，建议备份重要文件
3. **网络连接**：确保网络连接稳定，避免同步过程中断
4. **文件冲突**：如果本地和远程文件都有修改，系统会根据选择的同步方向进行处理
5. **大文件同步**：大文件同步可能需要较长时间，请耐心等待

## 故障排除

如果遇到同步问题，可以：
1. 检查网络连接是否正常
2. 验证 WebDAV 服务器地址和账户信息是否正确
3. 查看 VS Code 的输出面板中的错误信息
4. 尝试重新配置账户信息

## 支持的 WebDAV 服务

该功能支持标准的 WebDAV 协议，兼容大多数 WebDAV 服务，包括：
- Nextcloud
- ownCloud
- Apache HTTP Server (mod_dav)
- IIS WebDAV
- 其他符合 WebDAV 标准的服务